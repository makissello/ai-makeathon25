openai.ChatCompletion.create(
    model="gpt-4-1106-preview",
    messages=[
        {"role": "user", "content": "Analyze both uploaded files and summarize them. Respond in JSON."}
    ],
    temperature=0,
    tools=[
        {"type": "retrieval"}  # make sure retrieval tool is enabled
    ],
    tool_choice="auto",
    files=[file1.id, file2.id]  # attach multiple file IDs
)



import openai
import json

# Set your API key
openai.api_key = 'your-api-key'

# Create the API call
response = openai.ChatCompletion.create(
    model="gpt-4",  # or "gpt-3.5-turbo"
    messages=[
        {"role": "system", "content": "You are a helpful assistant that responds only in JSON format."},
        {"role": "user", "content": prompt}
    ],
    temperature=0  # low temperature = more accurate structure
)

# Get the text response
json_string = response['choices'][0]['message']['content']
